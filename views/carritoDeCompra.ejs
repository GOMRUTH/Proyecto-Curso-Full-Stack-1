<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> CarritoDeCompra </title>
        <link rel="stylesheet" href="/css/style.css" type="text/css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    </head>

    <body>
        
        <main class="Contorno Principal">
            <div class="BannerLogo">
                <img src="/img/Logo - Marca/LetraMMnegroFT.png">
            </div>
            <div>
                <nav class="OpcionesMenu">
                    <ul>
                        <li><a href="/principal">Inicio</a></li>
                        <li><a href="/productos">Productos</a></li>
                        <li><a href="/carritoDeCompra">Mi carrito</a></li>
                        <li><a href="/contacto">Contacto</a></li>
                    </ul>
                </nav>
            </div>
        </main>

        <div class="carrito">
            <h2>Mi Carrito</h2>
            <table class="tabla">
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Precio</th>
                        <th>Cantidad</th>
                        <th>Total</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <% let total = 0; %>
                    <% cart.forEach(item => { %>
                        <tr>
                            <td><%= item.nombre %></td>
                            <td><%= item.precio %></td>
                            <td><%= item.quantity %></td>
                            <td><%= item.precio * item.quantity %></td>
                            <td>
                                <form action="/update-cart" method="post">
                                    <input type="hidden" name="productId" value="<%= item.id %>">
                                    <input type="number" name="quantity" value="<%= item.quantity %>">
                                    <button type="submit">Actualizar</button>
                                </form>
                                <form action="/remove-from-cart" method="post">
                                    <input type="hidden" name="productId" value="<%= item.id %>">
                                    <button type="submit">Eliminar</button>
                                </form>
                            </td>
                        </tr>
                        <% total += item.precio * item.quantity; %>
                    <% }); %>
                </tbody>
            </table>
            <h2>Total: <%= total %></h2>
            <form action="/send-order" method="post">
                <button type="submit">Enviar Pedido</button>
            </form>
            
        </div>
        

        <footer class="credito"> 
            <p> Derechos Reservados &copy; 2024 - Ruth Gomez</p>
        </footer>

    </body>
</html>